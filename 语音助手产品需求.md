# 📘 Typeless-Like 桌面语音助手 PRD（Markdown 版）

> **版本：v1.1**（加入意图识别与 LLM 推理模块）\
> **适用对象：产品经理、架构师、前端/客户端工程师、AI 工程师**

## 1. 产品定位

一个跨平台的桌面语音助手，通过**全局热键**唤醒，让用户能够：

1.  **快速听写文字**（Dictation）
2.  **执行指令与自动化任务**（Command / Agent）
3.  **对选中内容进行编辑、润色、总结等**（Editing）
4.  **操作本地电脑（文件、命令行、软件）**
5.  **调用外部服务：Slack、Email、API 调用**

本质上是一个：

> **「语音输入 + 意图识别 + LLM 推理 + 本地工具执行」 的桌面智能助手**

## 2. 用户场景

### 2.1 办公写作

-   发邮件、发 Slack、写文档、改写内容\
-   语音直接输入文字，节约打字时间

### 2.2 自动化操作

-   "打开 Chrome 并搜索 XX"\
-   "把 Downloads 里最新文件发给运营群"

### 2.3 开发者场景

-   "帮我在当前项目创建一个 utils/file.ts 文件"\
-   "运行一下 npm run dev"

### 2.4 重度沟通用户

-   "帮我写一段更专业的回复"\
-   "总结一下我选中的三段内容"

------------------------------------------------------------------------

## 3. 产品结构（高层模块）

    [热键唤醒]
          ↓
    [音频采集] - 麦克风
          ↓
    [STT：语音转文字]
          ↓
    ──────── Intent Recognition ────────
          ↓
    [推理（LLM / Claude Agent）]
          ↓
    [工具调用链 Tools]
          ↓
    [本地系统执行动作]
          ↓
    [反馈 / 回写文本 / 通知结果]

------------------------------------------------------------------------

## 4. 功能需求

# ⭐ 4.1 全局热键唤醒

### 描述

用户按键 → 进入录音状态。

### 要求

-   支持自定义热键（默认：`Ctrl + Space`）\
-   三种模式：
    -   **长按**：听写模式（Dictation）
    -   **单击**：指令模式（Command）
    -   **双击热键**：强制 Agent 模式

------------------------------------------------------------------------

# ⭐ 4.2 语音转文字（STT 模块）

### 描述

将音频实时/快速转为文本。

### 来源（可选）

-   PLAUD STT（推荐）\
-   Whisper 本地\
-   Whisper API

### 输出要求

-   最终精确文本\
-   流式字幕（可选）\
-   300ms 内完成一个句子的断句

------------------------------------------------------------------------

# ⭐ 4.3 意图识别（Intent Recognition 模块）

### 描述

在 STT 的文本基础上，系统需要判断：

    用户到底是在“听写”，还是在“给指令”？

### 方案 A：规则识别

### 方案 B：LLM 识别（推荐）

------------------------------------------------------------------------

# ⭐ 4.4 Command / Agent 模式（LLM 推理）

使用 Claude Agent SDK：

1.  LLM 解析意图\
2.  规划工具调用链\
3.  执行多步骤任务\
4.  返回执行结果

------------------------------------------------------------------------

# ⭐ 4.5 工具（Tools）体系

### Level 1：基础工具

-   type_text\
-   paste_text\
-   read_clipboard\
-   press_shortcut

### Level 2：系统操作

-   open_app\
-   run_shell\
-   read_file\
-   write_file\
-   list_dir

### Level 3：外部 API

-   send_slack\
-   send_email\
-   fetch_url

------------------------------------------------------------------------

# ⭐ 4.6 Dictation（听写模式）

-   STT 输出直接插入当前光标\
-   支持自动标点

------------------------------------------------------------------------

# ⭐ 4.7 文本编辑模式（Editing）

-   总结\
-   翻译\
-   润色\
-   改写

------------------------------------------------------------------------

# ⭐ 4.8 UI 模块

-   托盘菜单\
-   设置页\
-   通知弹窗\
-   工具权限管理

------------------------------------------------------------------------

## 5. 技术架构

    ┌─────────────────────────────┐
    │         桌面端（主程序）        │
    │ Electron / Swift        │
    ├─────────────────────────────┤
    │ 热键监听                      │
    │ 音频采集                      │
    │ STT 管线                      │
    │ 意图识别（规则+LLM）          │
    │ 工具执行层（本地执行者）       │
    │ UI/托盘                       │
    └───────────┬───────────────────┘
                │
                ▼
    ┌─────────────────────────────┐
    │      Claude Agent SDK       │
    │ - 推理                      │
    │ - 工具规划（多步骤任务）      │
    │ - 工具调用                  │
    └─────────────────────────────┘
                │
                ▼
    ┌─────────────────────────────┐
    │         外部服务 & API        │
    │ Slack / Email / Web / DB     │
    └─────────────────────────────┘

------------------------------------------------------------------------

## 6. 权限模型

-   用户可关闭高权限工具\
-   删除/命令行操作需要二次确认\
-   工具调用记录日志

------------------------------------------------------------------------

## 7. 非功能性要求（NFR）

-   听写延迟 \< 300ms\
-   工具链执行延迟 \< 800ms\
-   支持纯本地模式

------------------------------------------------------------------------

## 8. Roadmap

### v1.0：核心能力

### v1.1：文本编辑能力

### v1.5：可视化日志

### v2.0：屏幕理解 + UI 自动化
